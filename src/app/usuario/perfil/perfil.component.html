<app-navbar></app-navbar>
<app-subir-contenido (publicada)="onPublicada($event)"></app-subir-contenido>

<div class="container mt-4 perfil-container">
  <div class="card perfil-card p-4">

    <!-- FOTO + DATOS -->
    <div class="text-center">
      <img src="images/yo.png" alt="Foto de perfil" class="perfil-foto mb-2" />
      <h3 class="mb-0">{{ usuario.nombre }}</h3>
      <p class="text-muted">{{ '@' + usuario.usuario }}</p>
      <p class="text-muted small">
        <i class="fa-solid fa-graduation-cap"></i> {{ usuario.carrera }} ·
        <i class="fa-solid fa-layer-group"></i> Semestre {{ usuario.semestre }}
      </p>
    </div>

    <!-- BIO -->
    <p class="text-muted text-center mt-2">{{ usuario.bio }}</p>

    <!-- ESTADÍSTICAS -->
    <div class="d-flex justify-content-around text-center my-3">
      <div>
        <strong>{{ usuario.amigos }}</strong><br>
        <small><i class="fa-solid fa-user-group"></i> Amigos</small>
      </div>
      <div>
        <strong>{{ usuario.publicaciones }}</strong><br>
        <small><i class="fa-solid fa-images"></i> Publicaciones</small>
      </div>
      <div>
        <strong>{{ usuario.experiencias.length }}</strong><br>
        <small><i class="fa-solid fa-laptop-code"></i> Cursos/Hackatones</small>
      </div>
    </div>

    <!-- BOTONES -->
    <div class="d-flex gap-2 mb-3">
      <button class="btn btn-primary w-30" >
        <i class="fa-solid fa-user-pen"></i> Editar
      </button>
      <button class="btn btn-outline-secondary w-30">
        <i class="fa-solid fa-gear"></i> Configuración
      </button>
    </div>

    <hr>

    <!-- FOTOS + HACKATONES -->
    <div class="row g-3">
      <!-- FOTOS -->
      <div class="col-md-8">
        <h6><i class="fa-solid fa-camera"></i> Fotos</h6>
        <div class="row g-2">
          <div class="col-4" *ngFor="let foto of fotos">
            <img [src]="foto.url" class="img-fluid rounded foto-galeria"
                 (click)="abrirDetalle(foto)" style="cursor:pointer;">
          </div>
        </div>
      </div>

      <!-- HACKATONES Y CURSOS -->
      <div class="col-md-4">
        <h6><i class="fa-solid fa-laptop-code"></i> Hackatones y Cursos</h6>
        <ul class="list-group small">
          <li class="list-group-item" *ngFor="let item of usuario.experiencias">
            <i class="fa-solid fa-check-circle text-success"></i> {{ item }}
          </li>
        </ul>
      </div>
    </div>

  </div>
</div>

<!-- MODAL DETALLE -->
<div class="detalle-backdrop" *ngIf="fotoSeleccionada">
  <div class="detalle-panel">
    <div class="detalle-header d-flex justify-content-between align-items-center">
      <h6><i class="fa-solid fa-image"></i> Detalle de publicación</h6>
      <button class="btn-close" (click)="cerrarDetalle()"></button>
    </div>
    <div class="detalle-content">
      <img [src]="fotoSeleccionada.url" class="detalle-img" alt="Publicación">
      <small class="text-muted d-block mt-2">
        <i class="fa-regular fa-calendar"></i> {{ fotoSeleccionada.fecha }}
      </small>
      <p>{{ fotoSeleccionada.descripcion }}</p>
      <div class="chips">
        <span class="chip"><i class="fa-solid fa-heart"></i> {{ fotoSeleccionada.likes }}</span>
        <span class="chip"><i class="fa-solid fa-comment"></i> {{ fotoSeleccionada.comentarios.length || 0 }}</span>
        <span class="chip"><i class="fa-solid fa-share"></i> {{ fotoSeleccionada.compartidos }}</span>
      </div>
      <div class="comentarios-box mt-2">
        <p class="fw-bold small">Comentarios</p>
        <p *ngFor="let c of fotoSeleccionada.comentarios" class="bubble">
          <i class="fa-regular fa-comment-dots text-primary"></i> {{ c }}
        </p>
      </div>
    </div>
  </div>
</div>